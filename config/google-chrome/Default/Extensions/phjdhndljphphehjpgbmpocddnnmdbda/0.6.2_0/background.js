/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={844:(e,t,r)=>{"use strict";r.d(t,{Rf:()=>i,DM:()=>s,en:()=>a,jH:()=>c,Cf:()=>u,Db:()=>l,EG:()=>p,l4:()=>d,JY:()=>h});var n=r(422),o={};function i(){return(0,n.KV)()?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:o}function s(){var e=i(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var r=new Uint16Array(8);t.getRandomValues(r),r[3]=4095&r[3]|16384,r[4]=16383&r[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(r[0])+n(r[1])+n(r[2])+n(r[3])+n(r[4])+n(r[5])+n(r[6])+n(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function a(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+r+n}}function c(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function u(e){var t=i();if(!("console"in t))return e();var r=t.console,n={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&r[e].__sentry_original__&&(n[e]=r[e],r[e]=r[e].__sentry_original__)}));var o=e();return Object.keys(n).forEach((function(e){r[e]=n[e]})),o}function l(e,t,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||r||"Error"}function p(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(r){e.exception.values[0].mechanism[r]=t[r]}))}catch(e){}}function d(){try{return document.location.href}catch(e){return""}}function h(e,t){if(!t)return 6e4;var r=parseInt(""+t,10);if(!isNaN(r))return 1e3*r;var n=Date.parse(""+t);return isNaN(n)?6e4:n-e}},422:(e,t,r)=>{"use strict";function n(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function o(e,t){return e.require(t)}r.d(t,{KV:()=>n,l$:()=>o}),e=r.hmd(e)},170:(e,t,r)=>{"use strict";r.d(t,{yW:()=>u});var n=r(844),o=r(422);e=r.hmd(e);var i,s={nowSeconds:function(){return Date.now()/1e3}},a=(0,o.KV)()?function(){try{return(0,o.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){var e=(0,n.Rf)().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),c=void 0===a?s:{nowSeconds:function(){return(a.timeOrigin+a.now())/1e3}},u=s.nowSeconds.bind(s);c.nowSeconds.bind(c),(i=(0,n.Rf)().performance)&&(i.timeOrigin?i.timeOrigin:i.timing&&i.timing.navigationStart||Date.now())},121:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n}),e=r.hmd(e);const n=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e)},150:function(e,t){var r,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(n="function"==typeof(r=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The message port closed before a response was received.",r="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class o extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(e.runtime.lastError):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},s=e=>1==e?"argument":"arguments",a=(e,t,r)=>new Proxy(t,{apply:(t,n,o)=>r.call(n,e,...o)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const u=(e,t={},r={})=>{let n=Object.create(null),o={has:(t,r)=>r in e||r in n,get(o,l,p){if(l in n)return n[l];if(!(l in e))return;let d=e[l];if("function"==typeof d)if("function"==typeof t[l])d=a(e,e[l],t[l]);else if(c(r,l)){let t=((e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((o,s)=>{if(t.fallbackToNoCallback)try{r[e](...n,i({resolve:o,reject:s},t))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,o()}else t.noCallback?(r[e](...n),o()):r[e](...n,i({resolve:o,reject:s},t))}))})(l,r[l]);d=a(e,e[l],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(c(t,l)||c(r,l)))d=u(d,t[l],r[l]);else{if(!c(r,"*"))return Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(t){e[l]=t}}),d;d=u(d,t[l],r["*"])}return n[l]=d,d},set:(t,r,o,i)=>(r in n?n[r]=o:e[r]=o,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},l=Object.create(e);return new Proxy(l,o)},l=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}});let p=!1;const d=new o((e=>"function"!=typeof e?e:function(t,n,o){let i,s,a=!1,c=new Promise((e=>{i=function(t){p||(console.warn(r,(new Error).stack),p=!0),a=!0,e(t)}}));try{s=e(t,n,i)}catch(e){s=Promise.reject(e)}const u=!0!==s&&((l=s)&&"object"==typeof l&&"function"==typeof l.then);var l;if(!0!==s&&!u&&!a)return!1;return(u?s:c).then((e=>{o(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",o({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),h=({reject:r,resolve:n},o)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(e.runtime.lastError):o&&o.__mozWebExtensionPolyfillReject__?r(new Error(o.message)):n(o)},f=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const o=h.bind(null,{resolve:e,reject:t});n.push(o),r.sendMessage(...n)}))},g={runtime:{onMessage:l(d),onMessageExternal:l(d),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},m={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":m},services:{"*":m},websites:{"*":m}},u(e,g,n)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=n(chrome)}else e.exports=browser})?r.apply(t,[e]):r)||(e.exports=n)}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};function t(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var a=r(844),c=r(170),u=(0,a.Rf)(),l="Sentry Logger ",p=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,a.Cf)((function(){u.console.log(l+"[Log]: "+e.join(" "))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,a.Cf)((function(){u.console.warn(l+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,a.Cf)((function(){u.console.error(l+"[Error]: "+e.join(" "))}))},e}();u.__SENTRY__=u.__SENTRY__||{};var d,h=u.__SENTRY__.logger||(u.__SENTRY__.logger=new p),f=r(422);function g(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return A(e,Error)}}function m(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function v(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function y(e){return"[object String]"===Object.prototype.toString.call(e)}function _(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function b(e){return"[object Object]"===Object.prototype.toString.call(e)}function w(e){return"undefined"!=typeof Event&&A(e,Event)}function x(e){return"undefined"!=typeof Element&&A(e,Element)}function E(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function A(e,t){try{return e instanceof t}catch(e){return!1}}!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(d||(d={}));var S,R=function(){function e(e){var t=this;this._state=d.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(d.RESOLVED,e)},this._reject=function(e){t._setResult(d.REJECTED,e)},this._setResult=function(e,r){t._state===d.PENDING&&(E(r)?r.then(t._resolve,t._reject):(t._state=e,t._value=r,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==d.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===d.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===d.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,r){r(t)}))},e.all=function(t){return new e((function(r,n){if(Array.isArray(t))if(0!==t.length){var o=t.length,i=[];t.forEach((function(t,s){e.resolve(t).then((function(e){i[s]=e,0==(o-=1)&&r(i)})).then(null,n)}))}else r([]);else n(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,r){var n=this;return new e((function(e,o){n._attachHandler({done:!1,onfulfilled:function(r){if(t)try{return void e(t(r))}catch(e){return void o(e)}else e(r)},onrejected:function(t){if(r)try{return void e(r(t))}catch(e){return void o(e)}else o(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var r=this;return new e((function(e,n){var o,i;return r.then((function(e){i=!1,o=e,t&&t()}),(function(e){i=!0,o=e,t&&t()})).then((function(){i?n(o):e(o)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),k=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var r=new e;return t&&(r._breadcrumbs=s(t._breadcrumbs),r._tags=n({},t._tags),r._extra=n({},t._extra),r._contexts=n({},t._contexts),r._user=t._user,r._level=t._level,r._span=t._span,r._session=t._session,r._transactionName=t._transactionName,r._fingerprint=t._fingerprint,r._eventProcessors=s(t._eventProcessors)),r},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.setTags=function(e){return this._tags=n(n({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var r;return this._tags=n(n({},this._tags),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=n(n({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var r;return this._extra=n(n({},this._extra),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var r;return null===t?delete this._contexts[e]:this._contexts=n(n({},this._contexts),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,r,n,o=this.getSpan();return(null===(e=o)||void 0===e?void 0:e.transaction)?null===(t=o)||void 0===t?void 0:t.transaction:(null===(n=null===(r=o)||void 0===r?void 0:r.spanRecorder)||void 0===n?void 0:n.spans[0])?o.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var r=t(this);return r instanceof e?r:this}return t instanceof e?(this._tags=n(n({},this._tags),t._tags),this._extra=n(n({},this._extra),t._extra),this._contexts=n(n({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint)):b(t)&&(t=t,this._tags=n(n({},this._tags),t.tags),this._extra=n(n({},this._extra),t.extra),this._contexts=n(n({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var r=n({timestamp:(0,c.yW)()},e);return this._breadcrumbs=void 0!==t&&t>=0?s(this._breadcrumbs,[r]).slice(-t):s(this._breadcrumbs,[r]),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var r;if(this._extra&&Object.keys(this._extra).length&&(e.extra=n(n({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=n(n({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=n(n({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=n(n({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=n({trace:this._span.getTraceContext()},e.contexts);var o=null===(r=this._span.transaction)||void 0===r?void 0:r.name;o&&(e.tags=n({transaction:o},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=s(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(s(T(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,r,o){var i=this;return void 0===o&&(o=0),new R((function(s,a){var c=e[o];if(null===t||"function"!=typeof c)s(t);else{var u=c(n({},t),r);E(u)?u.then((function(t){return i._notifyEventProcessors(e,t,r,o+1).then(s)})).then(null,a):i._notifyEventProcessors(e,u,r,o+1).then(s).then(null,a)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function T(){var e=(0,a.Rf)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function O(e){T().push(e)}function I(e){try{for(var t=e,r=[],n=0,o=0,i=" > ".length,s=void 0;t&&n++<5&&!("html"===(s=j(t))||n>1&&o+r.length*i+s.length>=80);)r.push(s),o+=s.length,t=t.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}function j(e){var t,r,n,o,i,s=e,a=[];if(!s||!s.tagName)return"";if(a.push(s.tagName.toLowerCase()),s.id&&a.push("#"+s.id),(t=s.className)&&y(t))for(r=t.split(/\s+/),i=0;i<r.length;i++)a.push("."+r[i]);var c=["type","name","title","alt"];for(i=0;i<c.length;i++)n=c[i],(o=s.getAttribute(n))&&a.push("["+n+'="'+o+'"]');return a.join("")}!function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(S||(S={}));var C=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e)return!0;return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}(),P="<anonymous>";function D(e){try{return e&&"function"==typeof e&&e.name||P}catch(e){return P}}function N(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function L(e,t){if(!Array.isArray(e))return"";for(var r=[],n=0;n<e.length;n++){var o=e[n];try{r.push(String(o))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function q(e,t){return!!y(e)&&(r=t,"[object RegExp]"===Object.prototype.toString.call(r)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t));var r}function U(e,t,r){if(t in e){var n=e[t],o=r(n);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:n}})}catch(e){}e[t]=o}}function M(e){if(g(e)){var t=e,r={message:t.message,name:t.name,stack:t.stack};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}if(w(e)){var o=e,i={};i.type=o.type;try{i.target=x(o.target)?I(o.target):Object.prototype.toString.call(o.target)}catch(e){i.target="<unknown>"}try{i.currentTarget=x(o.currentTarget)?I(o.currentTarget):Object.prototype.toString.call(o.currentTarget)}catch(e){i.currentTarget="<unknown>"}for(var n in"undefined"!=typeof CustomEvent&&A(e,CustomEvent)&&(i.detail=o.detail),o)Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o);return i}return e}function B(e,t,r){void 0===t&&(t=3),void 0===r&&(r=102400);var n,o=W(e,t);return n=o,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(n))>r?B(e,t-1,r):o}function H(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==r.g&&e===r.g?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":b(n=e)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+D(e)+"]":e;var n}function F(e,t,r,n){if(void 0===r&&(r=1/0),void 0===n&&(n=new C),0===r)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var r=H(e);return _(r)?r:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var o=H(t,e);if(_(o))return o;var i=M(t),s=Array.isArray(t)?[]:{};if(n.memoize(t))return"[Circular ~]";for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=F(a,i[a],r-1,n));return n.unmemoize(t),s}function W(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,r){return F(e,r,t)})))}catch(e){return"**non-serializable**"}}function $(e,t){void 0===t&&(t=40);var r=Object.keys(M(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return N(r[0],t);for(var n=r.length;n>0;n--){var o=r.slice(0,n).join(", ");if(!(o.length>t))return n===r.length?o:N(o,t)}return""}function Y(e){var t,r;if(b(e)){var n=e,i={};try{for(var s=o(Object.keys(n)),a=s.next();!a.done;a=s.next()){var c=a.value;void 0!==n[c]&&(i[c]=Y(n[c]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(Y):e}var V=function(){function e(e){this.errors=0,this.sid=(0,a.DM)(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=S.Ok,e&&this.update(e)}return e.prototype.update=function(e){void 0===e&&(e={}),e.user&&(e.user.ip_address&&(this.ipAddress=e.user.ip_address),e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Date.now(),e.sid&&(this.sid=32===e.sid.length?e.sid:(0,a.DM)()),e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),"number"==typeof e.duration?this.duration=e.duration:this.duration=this.timestamp-this.started,e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),e.ipAddress&&(this.ipAddress=e.ipAddress),e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===S.Ok?this.update({status:S.Exited}):this.update()},e.prototype.toJSON=function(){return Y({sid:""+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:Y({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),G=function(){function e(e,t,r){void 0===t&&(t=new k),void 0===r&&(r=3),this._version=r,this._stack=[{}],this.getStackTop().scope=t,this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=k.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var r=this._lastEventId=(0,a.DM)(),o=t;if(!t){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(e){i=e}o={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,n(n({},o),{event_id:r})),r},e.prototype.captureMessage=function(e,t,r){var o=this._lastEventId=(0,a.DM)(),i=r;if(!r){var s=void 0;try{throw new Error(e)}catch(e){s=e}i={originalException:e,syntheticException:s}}return this._invokeClient("captureMessage",e,t,n(n({},i),{event_id:o})),o},e.prototype.captureEvent=function(e,t){var r=this._lastEventId=(0,a.DM)();return this._invokeClient("captureEvent",e,n(n({},t),{event_id:r})),r},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var r=this.getStackTop(),o=r.scope,i=r.client;if(o&&i){var s=i.getOptions&&i.getOptions()||{},u=s.beforeBreadcrumb,l=void 0===u?null:u,p=s.maxBreadcrumbs,d=void 0===p?100:p;if(!(d<=0)){var h=(0,c.yW)(),f=n({timestamp:h},e),g=l?(0,a.Cf)((function(){return l(f,t)})):f;null!==g&&o.addBreadcrumb(g,Math.min(d,100))}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var r=this.getScope();r&&r.setTag(e,t)},e.prototype.setExtra=function(e,t){var r=this.getScope();r&&r.setExtra(e,t)},e.prototype.setContext=function(e,t){var r=this.getScope();r&&r.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),r=t.scope,n=t.client;r&&n&&e(r)},e.prototype.run=function(e){var t=z(this);try{e(this)}finally{z(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return h.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.startSession=function(e){this.endSession();var t=this.getStackTop(),r=t.scope,o=t.client,i=o&&o.getOptions()||{},s=i.release,a=i.environment,c=new V(n(n({release:s,environment:a},r&&{user:r.getUser()}),e));return r&&r.setSession(c),c},e.prototype.endSession=function(){var e=this.getStackTop(),t=e.scope,r=e.client;if(t){var n=t.getSession&&t.getSession();n&&(n.close(),r&&r.captureSession&&r.captureSession(n),t.setSession())}},e.prototype._invokeClient=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this.getStackTop(),i=o.scope,a=o.client;a&&a[e]&&(t=a)[e].apply(t,s(r,[i]))},e.prototype._callExtensionMethod=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=J(),o=n.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[e])return o.extensions[e].apply(this,t);h.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function J(){var e=(0,a.Rf)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function z(e){var t=J(),r=Z(t);return Q(t,e),r}function X(){var e=J();return K(e)&&!Z(e).isOlderThan(3)||Q(e,new G),(0,f.KV)()?function(e){try{var t=(n=J().__SENTRY__)&&n.extensions&&n.extensions.domain&&n.extensions.domain.active;if(!t)return Z(e);if(!K(t)||Z(t).isOlderThan(3)){var r=Z(e).getStackTop();Q(t,new G(r.client,k.clone(r.scope)))}return Z(t)}catch(t){return Z(e)}var n}(e):Z(e)}function K(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Z(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new G),e.__SENTRY__.hub}function Q(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}var ee,te=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],re=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){O((function(t){var r=X();if(!r)return t;var n=r.getIntegration(e);if(n){var o=r.getClient(),i=o?o.getOptions():{},s=n._mergeOptions(i);if(n._shouldDropEvent(t,s))return null}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(h.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,a.jH)(e)),!0):this._isIgnoredError(e,t)?(h.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,a.jH)(e)),!0):this._isDeniedUrl(e,t)?(h.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+(0,a.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(h.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+(0,a.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return q(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var r=this._getEventFilterUrl(e);return!!r&&t.denyUrls.some((function(e){return q(r,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var r=this._getEventFilterUrl(e);return!r||t.allowUrls.some((function(e){return q(r,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:s(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:s(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:s(this._options.ignoreErrors||[],e.ignoreErrors||[],te),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},r=t.type,n=void 0===r?"":r,o=t.value,i=void 0===o?"":o;return[""+i,n+": "+i]}catch(t){return h.error("Cannot extract message for event "+(0,a.jH)(e)),[]}return[]},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var r=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return r&&r[r.length-1].filename||null}return null}catch(t){return h.error("Cannot extract url for event "+(0,a.jH)(e)),null}},e.id="InboundFilters",e}(),ne=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){ee=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.__sentry_original__||this;return ee.apply(r,e)}},e.id="FunctionToString",e}(),oe=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r]);return e}),ie=function(e){function r(t){var r=this.constructor,n=e.call(this,t)||this;return n.message=t,n.name=r.prototype.constructor.name,oe(n,r.prototype),n}return t(r,e),r}(Error),se=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,ae=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,r=t.host,n=t.path,o=t.pass,i=t.port,s=t.projectId;return t.protocol+"://"+t.user+(e&&o?":"+o:"")+"@"+r+(i?":"+i:"")+"/"+(n?n+"/":n)+s},e.prototype._fromString=function(e){var t=se.exec(e);if(!t)throw new ie("Invalid Dsn");var r=i(t.slice(1),6),n=r[0],o=r[1],s=r[2],a=void 0===s?"":s,c=r[3],u=r[4],l=void 0===u?"":u,p="",d=r[5],h=d.split("/");if(h.length>1&&(p=h.slice(0,-1).join("/"),d=h.pop()),d){var f=d.match(/^\d+/);f&&(d=f[0])}this._fromComponents({host:c,pass:a,path:p,projectId:d,port:l,protocol:n,user:o})},e.prototype._fromComponents=function(e){this.protocol=e.protocol,this.user=e.user,this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","user","host","projectId"].forEach((function(t){if(!e[t])throw new ie("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new ie("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new ie("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new ie("Invalid Dsn: Invalid port "+this.port)},e}(),ce=[];var ue,le=function(){function e(e,t){this._integrations={},this._processing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new ae(t.dsn))}return e.prototype.captureException=function(e,t,r){var n=this,o=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return n._captureEvent(e,t,r)})).then((function(e){o=e}))),o},e.prototype.captureMessage=function(e,t,r,n){var o=this,i=r&&r.event_id,s=_(e)?this._getBackend().eventFromMessage(""+e,t,r):this._getBackend().eventFromException(e,r);return this._process(s.then((function(e){return o._captureEvent(e,r,n)})).then((function(e){i=e}))),i},e.prototype.captureEvent=function(e,t,r){var n=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then((function(e){n=e}))),n},e.prototype.captureSession=function(e){e.release?this._sendSession(e):h.warn("Discarded session because of missing release")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then((function(r){return t._getBackend().getTransport().close(e).then((function(e){return r&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){var e,t;this._isEnabled()&&(this._integrations=(e=this._options,t={},function(e){var t=e.defaultIntegrations&&s(e.defaultIntegrations)||[],r=e.integrations,n=[];if(Array.isArray(r)){var o=r.map((function(e){return e.name})),i=[];t.forEach((function(e){-1===o.indexOf(e.name)&&-1===i.indexOf(e.name)&&(n.push(e),i.push(e.name))})),r.forEach((function(e){-1===i.indexOf(e.name)&&(n.push(e),i.push(e.name))}))}else"function"==typeof r?(n=r(t),n=Array.isArray(n)?n:[n]):n=s(t);var a=n.map((function(e){return e.name})),c="Debug";return-1!==a.indexOf(c)&&n.push.apply(n,s(n.splice(a.indexOf(c),1))),n}(e).forEach((function(e){t[e.name]=e,function(e){-1===ce.indexOf(e.name)&&(e.setupOnce(O,X),ce.push(e.name),h.log("Integration installed: "+e.name))}(e)})),t))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return h.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var r,i,s,a=!1,c=!1,u=t.exception&&t.exception.values;if(u){c=!0;try{for(var l=o(u),p=l.next();!p.done;p=l.next()){var d=p.value.mechanism;if(d&&!1===d.handled){a=!0;break}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}var h=t.user;if(!e.userAgent){var f=t.request?t.request.headers:{};for(var g in f)if("user-agent"===g.toLowerCase()){s=f[g];break}}e.update(n(n({},a&&{status:S.Crashed}),{user:h,userAgent:s,errors:e.errors+Number(c||a)}))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientProcessing=function(e){var t=this;return new R((function(r){var n=0,o=setInterval((function(){0==t._processing?(clearInterval(o),r(!0)):(n+=1,e&&n>=e&&(clearInterval(o),r(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,r){var o=this,i=this.getOptions().normalizeDepth,s=void 0===i?3:i,u=n(n({},e),{event_id:e.event_id||(r&&r.event_id?r.event_id:(0,a.DM)()),timestamp:e.timestamp||(0,c.yW)()});this._applyClientOptions(u),this._applyIntegrationsMetadata(u);var l=t;r&&r.captureContext&&(l=k.clone(l).update(r.captureContext));var p=R.resolve(u);return l&&(p=l.applyToEvent(u,r)),p.then((function(e){return"number"==typeof s&&s>0?o._normalizeEvent(e,s):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var r=n(n(n(n(n({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return n(n({},e),e.data&&{data:W(e.data,t)})}))}),e.user&&{user:W(e.user,t)}),e.contexts&&{contexts:W(e.contexts,t)}),e.extra&&{extra:W(e.extra,t)});return e.contexts&&e.contexts.trace&&(r.contexts.trace=e.contexts.trace),r},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),r=t.environment,n=t.release,o=t.dist,i=t.maxValueLength,s=void 0===i?250:i;"environment"in e||(e.environment="environment"in t?r:"production"),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=N(e.message,s));var a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=N(a.value,s));var c=e.request;c&&c.url&&(c.url=N(c.url,s))},e.prototype._applyIntegrationsMetadata=function(e){var t=e.sdk,r=Object.keys(this._integrations);t&&r.length>0&&(t.integrations=r)},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,r){return this._processEvent(e,t,r).then((function(e){return e.event_id}),(function(e){h.error(e)}))},e.prototype._processEvent=function(e,t,r){var n=this,o=this.getOptions(),i=o.beforeSend,s=o.sampleRate;if(!this._isEnabled())return R.reject(new ie("SDK not enabled, will not send event."));var a="transaction"===e.type;return!a&&"number"==typeof s&&Math.random()>s?R.reject(new ie("This event has been sampled, will not send event.")):this._prepareEvent(e,r,t).then((function(e){if(null===e)throw new ie("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||a||!i)return e;var r=i(e,t);if(void 0===r)throw new ie("`beforeSend` method has to return `null` or a valid event.");return E(r)?r.then((function(e){return e}),(function(e){throw new ie("beforeSend rejected with "+e)})):r})).then((function(e){if(null===e)throw new ie("`beforeSend` returned `null`, will not send event.");var t=r&&r.getSession&&r.getSession();return!a&&t&&n._updateSessionFromEvent(t,e),n._sendEvent(e),e})).then(null,(function(e){if(e instanceof ie)throw e;throw n.captureException(e,{data:{__sentry__:!0},originalException:e}),new ie("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._processing+=1,e.then((function(e){return t._processing-=1,e}),(function(e){return t._processing-=1,e}))},e}();!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(ue||(ue={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(ue||(ue={}));var pe,de=function(){function e(){}return e.prototype.sendEvent=function(e){return R.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:ue.Skipped})},e.prototype.close=function(e){return R.resolve(!0)},e}(),he=function(){function e(e){this._options=e,this._options.dsn||h.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new ie("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,r){throw new ie("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){h.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){h.error("Error while sending session: "+e)})):h.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new de},e}();function fe(){if(!("fetch"in(0,a.Rf)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function ge(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function me(){if(!fe())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}!function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(pe||(pe={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(pe||(pe={}));var ve="?",ye=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,_e=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,be=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,we=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,xe=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ee=/Minified React error #\d+;/i;function Ae(e){var t=null,r=0;e&&("number"==typeof e.framesToPop?r=e.framesToPop:Ee.test(e.message)&&(r=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,n=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,o=e.stacktrace.split("\n"),i=[],s=0;s<o.length;s+=2){var a=null;(t=r.exec(o[s]))?a={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=n.exec(o[s]))&&(a={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),a&&(!a.func&&a.line&&(a.func=ve),i.push(a))}return i.length?{message:Re(e),name:e.name,stack:i}:null}(e))return Se(t,r)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,r,n,o=[],i=e.stack.split("\n"),s=0;s<i.length;++s){if(r=ye.exec(i[s])){var a=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(t=xe.exec(r[2]))&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),n={url:r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],func:r[1]||ve,args:a?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=be.exec(i[s]))n={url:r[2],func:r[1]||ve,args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=_e.exec(i[s])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(t=we.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=t[1],r[4]=t[2],r[5]=""):0!==s||r[5]||void 0===e.columnNumber||(o[0].column=e.columnNumber+1),n={url:r[3],func:r[1]||ve,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}!n.func&&n.line&&(n.func=ve),o.push(n)}return o.length?{message:Re(e),name:e.name,stack:o}:null}(e))return Se(t,r)}catch(e){}return{message:Re(e),name:e&&e.name,stack:[],failed:!0}}function Se(e,t){try{return n(n({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function Re(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function ke(e){var t=Oe(e.stack),r={type:e.name,value:e.message};return t&&t.length&&(r.stacktrace={frames:t}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Te(e){return{exception:{values:[ke(e)]}}}function Oe(e){if(!e||!e.length)return[];var t=e,r=t[0].func||"",n=t[t.length-1].func||"";return-1===r.indexOf("captureMessage")&&-1===r.indexOf("captureException")||(t=t.slice(1)),-1!==n.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function Ie(e,t,r){var o,i;if(void 0===r&&(r={}),m(e)&&e.error)return Te(Ae(e=e.error));if(v(e)||(i=e,"[object DOMException]"===Object.prototype.toString.call(i))){var s=e,c=s.name||(v(s)?"DOMError":"DOMException"),u=s.message?c+": "+s.message:c;return o=je(u,t,r),(0,a.Db)(o,u),"code"in s&&(o.tags=n(n({},o.tags),{"DOMException.code":""+s.code})),o}return g(e)?o=Te(Ae(e)):b(e)||w(e)?(o=function(e,t,r){var n={exception:{values:[{type:w(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:"Non-Error "+(r?"promise rejection":"exception")+" captured with keys: "+$(e)}]},extra:{__serialized__:B(e)}};if(t){var o=Oe(Ae(t).stack);n.stacktrace={frames:o}}return n}(e,t,r.rejection),(0,a.EG)(o,{synthetic:!0}),o):(o=je(e,t,r),(0,a.Db)(o,""+e,void 0),(0,a.EG)(o,{synthetic:!0}),o)}function je(e,t,r){void 0===r&&(r={});var n={message:e};if(r.attachStacktrace&&t){var o=Oe(Ae(t).stack);n.stacktrace={frames:o}}return n}function Ce(e,t){return{body:JSON.stringify({sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(e),type:"session",url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function Pe(e,t){var r="transaction"===e.type,n={body:JSON.stringify(e),type:e.type||"event",url:r?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(r){var o=JSON.stringify({event_id:e.event_id,sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:e.type})+"\n"+n.body;n.body=o}return n}var De=function(){function e(e){this.dsn=e,this._dsnObject=new ae(e)}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+":":"",r=e.port?":"+e.port:"";return t+"//"+e.host+r+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var r=this._dsnObject,n=["Sentry sentry_version=7"];return n.push("sentry_client="+e+"/"+t),n.push("sentry_key="+r.user),r.pass&&n.push("sentry_secret="+r.pass),{"Content-Type":"application/json","X-Sentry-Auth":n.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this._dsnObject,r=this.getBaseApiEndpoint()+"embed/error-page/",n=[];for(var o in n.push("dsn="+t.toString()),e)if("dsn"!==o)if("user"===o){if(!e.user)continue;e.user.name&&n.push("name="+encodeURIComponent(e.user.name)),e.user.email&&n.push("email="+encodeURIComponent(e.user.email))}else n.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n.length?r+"?"+n.join("&"):r},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e,t={sentry_key:this._dsnObject.user,sentry_version:"7"};return e=t,Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},e}(),Ne=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;return this.isReady()?(-1===this._buffer.indexOf(e)&&this._buffer.push(e),e.then((function(){return t.remove(e)})).then(null,(function(){return t.remove(e).then(null,(function(){}))})),e):R.reject(new ie("Not adding Promise due to buffer limit reached."))},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new R((function(r){var n=setTimeout((function(){e&&e>0&&r(!1)}),e);R.all(t._buffer).then((function(){clearTimeout(n),r(!0)})).then(null,(function(){r(!0)}))}))},e}(),Le=function(){function e(e){this.options=e,this._buffer=new Ne(30),this._rateLimits={},this._api=new De(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(e){throw new ie("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype._handleResponse=function(e){var t=e.requestType,r=e.response,n=e.headers,o=e.resolve,i=e.reject,s=ue.fromHttpCode(r.status);this._handleRateLimit(n)&&h.warn("Too many requests, backing off until: "+this._disabledUntil(t)),s!==ue.Success?i(r):o({status:s})},e.prototype._disabledUntil=function(e){return this._rateLimits[e]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,r,n,i,s=Date.now(),c=e["x-sentry-rate-limits"],u=e["retry-after"];if(c){try{for(var l=o(c.trim().split(",")),p=l.next();!p.done;p=l.next()){var d=p.value.split(":",2),h=parseInt(d[0],10),f=1e3*(isNaN(h)?60:h);try{for(var g=(n=void 0,o(d[1].split(";"))),m=g.next();!m.done;m=g.next()){var v=m.value;this._rateLimits[v||"all"]=new Date(s+f)}}catch(e){n={error:e}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return!0}return!!u&&(this._rateLimits.all=new Date(s+(0,a.JY)(s,u)),!0)},e}(),qe=(0,a.Rf)(),Ue=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.sendEvent=function(e){return this._sendRequest(Pe(e,this._api),e)},r.prototype.sendSession=function(e){return this._sendRequest(Ce(e,this._api),e)},r.prototype._sendRequest=function(e,t){var r=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var n={body:e.body,method:"POST",referrerPolicy:me()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(n,this.options.fetchParameters),void 0!==this.options.headers&&(n.headers=this.options.headers),this._buffer.add(new R((function(t,o){qe.fetch(e.url,n).then((function(n){var i={"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")};r._handleResponse({requestType:e.type,response:n,headers:i,resolve:t,reject:o})})).catch(o)})))},r}(Le),Me=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.sendEvent=function(e){return this._sendRequest(Pe(e,this._api),e)},r.prototype.sendSession=function(e){return this._sendRequest(Ce(e,this._api),e)},r.prototype._sendRequest=function(e,t){var r=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429}):this._buffer.add(new R((function(t,n){var o=new XMLHttpRequest;for(var i in o.onreadystatechange=function(){if(4===o.readyState){var i={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};r._handleResponse({requestType:e.type,response:o,headers:i,resolve:t,reject:n})}},o.open("POST",e.url),r.options.headers)r.options.headers.hasOwnProperty(i)&&o.setRequestHeader(i,r.options.headers[i]);o.send(e.body)})))},r}(Le),Be=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.eventFromException=function(e,t){return function(e,t,r){var n=Ie(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return(0,a.EG)(n,{handled:!0,type:"generic"}),n.level=pe.Error,r&&r.event_id&&(n.event_id=r.event_id),R.resolve(n)}(this._options,e,t)},r.prototype.eventFromMessage=function(e,t,r){return void 0===t&&(t=pe.Info),function(e,t,r,n){void 0===r&&(r=pe.Info);var o=je(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),R.resolve(o)}(this._options,e,t,r)},r.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=n(n({},this._options.transportOptions),{dsn:this._options.dsn});return this._options.transport?new this._options.transport(t):fe()?new Ue(t):new Me(t)},r}(he);function He(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=X();if(n&&n[e])return n[e].apply(n,s(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function Fe(e,t){var r;try{throw new Error("Sentry syntheticException")}catch(e){r=e}return He("captureException",e,{captureContext:t,originalException:e,syntheticException:r})}function We(e){He("withScope",e)}var $e=0;function Ye(){return $e>0}function Ve(){$e+=1,setTimeout((function(){$e-=1}))}function Ge(e,t,r){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var o=function(){var o=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);var i=o.map((function(e){return Ge(e,t)}));return e.handleEvent?e.handleEvent.apply(this,i):e.apply(this,i)}catch(e){throw Ve(),We((function(r){r.addEventProcessor((function(e){var r=n({},e);return t.mechanism&&((0,a.Db)(r,void 0,void 0),(0,a.EG)(r,t.mechanism)),r.extra=n(n({},r.extra),{arguments:o}),r})),Fe(e)})),e}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=e[i])}catch(e){}e.prototype=e.prototype||{},o.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:o}),Object.defineProperties(o,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get:function(){return e.name}})}catch(e){}return o}var Je,ze=(0,a.Rf)(),Xe={},Ke={};function Ze(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(Xe[e.type]=Xe[e.type]||[],Xe[e.type].push(e.callback),function(e){if(!Ke[e])switch(Ke[e]=!0,e){case"console":"console"in ze&&["debug","info","warn","error","log","assert"].forEach((function(e){e in ze.console&&U(ze.console,e,(function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];Qe("console",{args:r,level:e}),t&&Function.prototype.apply.call(t,ze.console,r)}}))}));break;case"dom":"document"in ze&&(ze.document.addEventListener("click",it("click",Qe.bind(null,"dom")),!1),ze.document.addEventListener("keypress",st(Qe.bind(null,"dom")),!1),["EventTarget","Node"].forEach((function(e){var t=ze[e]&&ze[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(U(t,"addEventListener",(function(e){return function(t,r,n){return r&&r.handleEvent?("click"===t&&U(r,"handleEvent",(function(e){return function(t){return it("click",Qe.bind(null,"dom"))(t),e.call(this,t)}})),"keypress"===t&&U(r,"handleEvent",(function(e){return function(t){return st(Qe.bind(null,"dom"))(t),e.call(this,t)}}))):("click"===t&&it("click",Qe.bind(null,"dom"),!0)(this),"keypress"===t&&st(Qe.bind(null,"dom"))(this)),e.call(this,t,r,n)}})),U(t,"removeEventListener",(function(e){return function(t,r,n){try{e.call(this,t,r.__sentry_wrapped__,n)}catch(e){}return e.call(this,t,r,n)}})))})));break;case"xhr":!function(){if("XMLHttpRequest"in ze){var e=[],t=[],r=XMLHttpRequest.prototype;U(r,"open",(function(r){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=this,s=n[1];i.__sentry_xhr__={method:y(n[0])?n[0].toUpperCase():n[0],url:n[1]},y(s)&&"POST"===i.__sentry_xhr__.method&&s.match(/sentry_key/)&&(i.__sentry_own_request__=!0);var a=function(){if(4===i.readyState){try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch(e){}try{var r=e.indexOf(i);if(-1!==r){e.splice(r);var o=t.splice(r)[0];i.__sentry_xhr__&&void 0!==o[0]&&(i.__sentry_xhr__.body=o[0])}}catch(e){}Qe("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:i})}};return"onreadystatechange"in i&&"function"==typeof i.onreadystatechange?U(i,"onreadystatechange",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return a(),e.apply(i,t)}})):i.addEventListener("readystatechange",a),r.apply(i,n)}})),U(r,"send",(function(r){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return e.push(this),t.push(n),Qe("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),r.apply(this,n)}}))}}();break;case"fetch":(function(){if(!fe())return!1;var e=(0,a.Rf)();if(ge(e.fetch))return!0;var t=!1,r=e.document;if(r&&"function"==typeof r.createElement)try{var n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=ge(n.contentWindow.fetch)),r.head.removeChild(n)}catch(e){h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t})()&&U(ze,"fetch",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={args:t,fetchData:{method:et(t),url:tt(t)},startTimestamp:Date.now()};return Qe("fetch",n({},o)),e.apply(ze,t).then((function(e){return Qe("fetch",n(n({},o),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw Qe("fetch",n(n({},o),{endTimestamp:Date.now(),error:e})),e}))}}));break;case"history":!function(){if(function(){var e=(0,a.Rf)(),t=e.chrome,r=t&&t.app&&t.app.runtime,n="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!r&&n}()){var e=ze.onpopstate;ze.onpopstate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=ze.location.href,o=Je;if(Je=n,Qe("history",{from:o,to:n}),e)return e.apply(this,t)},U(ze.history,"pushState",t),U(ze.history,"replaceState",t)}function t(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.length>2?t[2]:void 0;if(n){var o=Je,i=String(n);Je=i,Qe("history",{from:o,to:i})}return e.apply(this,t)}}}();break;case"error":at=ze.onerror,ze.onerror=function(e,t,r,n,o){return Qe("error",{column:n,error:o,line:r,msg:e,url:t}),!!at&&at.apply(this,arguments)};break;case"unhandledrejection":ct=ze.onunhandledrejection,ze.onunhandledrejection=function(e){return Qe("unhandledrejection",e),!ct||ct.apply(this,arguments)};break;default:h.warn("unknown instrumentation type:",e)}}(e.type))}function Qe(e,t){var r,n;if(e&&Xe[e])try{for(var i=o(Xe[e]||[]),s=i.next();!s.done;s=i.next()){var a=s.value;try{a(t)}catch(t){h.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+D(a)+"\nError: "+t)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}function et(e){return void 0===e&&(e=[]),"Request"in ze&&A(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function tt(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in ze&&A(e[0],Request)?e[0].url:String(e[0])}var rt,nt,ot=0;function it(e,t,r){return void 0===r&&(r=!1),function(n){rt=void 0,n&&nt!==n&&(nt=n,ot&&clearTimeout(ot),r?ot=setTimeout((function(){t({event:n,name:e})})):t({event:n,name:e}))}}function st(e){return function(t){var r;try{r=t.target}catch(e){return}var n=r&&r.tagName;n&&("INPUT"===n||"TEXTAREA"===n||r.isContentEditable)&&(rt||it("input",e)(t),clearTimeout(rt),rt=setTimeout((function(){rt=void 0}),1e3))}}var at=null,ct=null,ut=function(){function e(t){this.name=e.id,this._options=n({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&X().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:(0,a.jH)(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&Ze({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._consoleBreadcrumb.apply(e,s(t))},type:"console"}),this._options.dom&&Ze({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._domBreadcrumb.apply(e,s(t))},type:"dom"}),this._options.xhr&&Ze({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._xhrBreadcrumb.apply(e,s(t))},type:"xhr"}),this._options.fetch&&Ze({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._fetchBreadcrumb.apply(e,s(t))},type:"fetch"}),this._options.history&&Ze({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._historyBreadcrumb.apply(e,s(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:pe.fromString(e.level),message:L(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(L(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}X().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?I(e.event.target):I(e.event)}catch(e){t="<unknown>"}0!==t.length&&X().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},r=t.method,n=t.url,o=t.status_code,i=t.body;X().addBreadcrumb({category:"xhr",data:{method:r,url:n,status_code:o},type:"http"},{xhr:e.xhr,input:i})}},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?X().addBreadcrumb({category:"fetch",data:e.fetchData,level:pe.Error,type:"http"},{data:e.error,input:e.args}):X().addBreadcrumb({category:"fetch",data:n(n({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=(0,a.Rf)(),r=e.from,n=e.to,o=(0,a.en)(t.location.href),i=(0,a.en)(r),s=(0,a.en)(n);i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),X().addBreadcrumb({category:"navigation",data:{from:r,to:n}})},e.id="Breadcrumbs",e}(),lt="5.29.0",pt=function(e){function r(t){return void 0===t&&(t={}),e.call(this,Be,t)||this}return t(r,e),r.prototype.showReportDialog=function(e){void 0===e&&(e={}),(0,a.Rf)().document&&(this._isEnabled()?function(e){if(void 0===e&&(e={}),e.eventId)if(e.dsn){var t=document.createElement("script");t.async=!0,t.src=new De(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)}else h.error("Missing dsn option in showReportDialog call");else h.error("Missing eventId option in showReportDialog call")}(n(n({},e),{dsn:e.dsn||this.getDsn()})):h.error("Trying to call showReportDialog with Sentry Client disabled"))},r.prototype._prepareEvent=function(t,r,o){return t.platform=t.platform||"javascript",t.sdk=n(n({},t.sdk),{name:"sentry.javascript.browser",packages:s(t.sdk&&t.sdk.packages||[],[{name:"npm:@sentry/browser",version:lt}]),version:lt}),e.prototype._prepareEvent.call(this,t,r,o)},r.prototype._sendEvent=function(t){var r=this.getIntegration(ut);r&&r.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},r}(le),dt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],ht=function(){function e(t){this.name=e.id,this._options=n({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=(0,a.Rf)();this._options.setTimeout&&U(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&U(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&U(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&U(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:dt).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0];return t[0]=Ge(n,{mechanism:{data:{function:D(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,Ge(t,{mechanism:{data:{function:"requestAnimationFrame",handler:D(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=(0,a.Rf)(),r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(U(r,"addEventListener",(function(t){return function(r,n,o){try{"function"==typeof n.handleEvent&&(n.handleEvent=Ge(n.handleEvent.bind(n),{mechanism:{data:{function:"handleEvent",handler:D(n),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,r,Ge(n,{mechanism:{data:{function:"addEventListener",handler:D(n),target:e},handled:!0,type:"instrument"}}),o)}})),U(r,"removeEventListener",(function(e){return function(t,r,n){var o,i=r;try{var s=null===(o=i)||void 0===o?void 0:o.__sentry_wrapped__;s&&e.call(this,t,s,n)}catch(e){}return e.call(this,t,i,n)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(e){e in n&&"function"==typeof n[e]&&U(n,e,(function(t){var r={mechanism:{data:{function:e,handler:D(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(r.mechanism.data.handler=D(t.__sentry_original__)),Ge(t,r)}))})),e.apply(this,t)}},e.id="TryCatch",e}(),ft=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=n({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(h.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(h.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(Ze({callback:function(r){var n=r.error,o=X(),i=o.getIntegration(e),s=n&&!0===n.__sentry_own_request__;if(i&&!Ye()&&!s){var c=o.getClient(),u=_(n)?t._eventFromIncompleteOnError(r.msg,r.url,r.line,r.column):t._enhanceEventWithInitialFrame(Ie(n,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!1}),r.url,r.line,r.column);(0,a.EG)(u,{handled:!1,type:"onerror"}),o.captureEvent(u,{originalException:n})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(Ze({callback:function(r){var n=r;try{"reason"in r?n=r.reason:"detail"in r&&"reason"in r.detail&&(n=r.detail.reason)}catch(e){}var o=X(),i=o.getIntegration(e),s=n&&!0===n.__sentry_own_request__;if(!i||Ye()||s)return!0;var c=o.getClient(),u=_(n)?t._eventFromIncompleteRejection(n):Ie(n,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!0});u.level=pe.Error,(0,a.EG)(u,{handled:!1,type:"onunhandledrejection"}),o.captureEvent(u,{originalException:n})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,r,n){var o,i=m(e)?e.message:e;if(y(i)){var s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],i=s[2])}var a={exception:{values:[{type:o||"Error",value:i}]}};return this._enhanceEventWithInitialFrame(a,t,r,n)},e.prototype._eventFromIncompleteRejection=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+e}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,r,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(n,10))?void 0:n,i=isNaN(parseInt(r,10))?void 0:r,s=y(t)&&t.length>0?t:(0,a.l4)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:o,filename:s,function:"?",in_app:!0,lineno:i}),e},e.id="GlobalHandlers",e}(),gt=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){O((function(t,r){var n=X().getIntegration(e);return n?n._handler(t,r):t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&A(t.originalException,Error)))return e;var r=this._walkErrorTree(t.originalException,this._key);return e.exception.values=s(r,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,r){if(void 0===r&&(r=[]),!A(e[t],Error)||r.length+1>=this._limit)return r;var n=ke(Ae(e[t]));return this._walkErrorTree(e[t],t,s([n],r))},e.id="LinkedErrors",e}(),mt=(0,a.Rf)(),vt=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){O((function(t){var r,o,i;if(X().getIntegration(e)){if(!mt.navigator&&!mt.location&&!mt.document)return t;var s=(null===(r=t.request)||void 0===r?void 0:r.url)||(null===(o=mt.location)||void 0===o?void 0:o.href),a=(mt.document||{}).referrer,c=(mt.navigator||{}).userAgent,u=n(n(n({},null===(i=t.request)||void 0===i?void 0:i.headers),a&&{Referer:a}),c&&{"User-Agent":c}),l=n(n({},s&&{url:s}),{headers:u});return n(n({},t),{request:l})}return t}))},e.id="UserAgent",e}(),yt=[new re,new ne,new ht,new ut,new ft,new gt,new vt];function _t(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}r(150);var bt=_t();bt.withExtraArgument=_t;const wt=bt;var xt=r(121),Et=function(){return Math.random().toString(36).substring(7).split("").join(".")},At={INIT:"@@redux/INIT"+Et(),REPLACE:"@@redux/REPLACE"+Et(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Et()}};function St(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Rt(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(r,!0).forEach((function(t){kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function It(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function jt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return Ot({},r,{dispatch:n=It.apply(void 0,i)(r.dispatch)})}}}const Ct="check-external-messaging-support",Pt="recording/make-probe-request",Dt="recording/start/url",Nt="recording/start",Lt="recording/stop",qt="recording/pause",Ut="recording/resume",Mt="recording/reset",Bt="recording/download",Ht={isRecording:!1,isPaused:!1,harRecords:[],currentRecording:0},Ft=e=>["http:","https:"].includes(new URL(e).protocol),Wt="FINISHED",$t="recorder/capture-enabled",Yt="recorder/capture-disabled",Vt="recording/navigated-to-new-page",Gt="recording/request-sent",Jt="recording/request-finished",zt="recording/tab-closed",Xt="recording/interrupted",Kt={capturing:!1,nextId:0,tab:null,page:null,history:[],timeline:[],requests:{},download:!1},Zt=e=>e.capturing,Qt={error:null,userToken:null,activeWindowId:null,activeTabId:null},er=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:At.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:At.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+At.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,o={},a=0;a<s.length;a++){var c=s[a],u=r[c],l=e[c],p=u(l,t);if(void 0===p){var d=Rt(c,t);throw new Error(d)}o[c]=p,n=n||p!==l}return(n=n||s.length!==Object.keys(e).length)?o:e}}({controls:(e=Ht,t)=>{switch(t.type){case"RAISE_ERROR":return{...Ht,harRecords:e.harRecords};case Nt:return{...e,error:null,isRecording:!0,isPaused:!1};case Lt:return{...e,isRecording:!1,isPaused:!1};case qt:return{...e,isPaused:!0};case Ut:return{...e,isPaused:!1};case Mt:return{...Ht,harRecords:e.harRecords};case"ADD_HAR_RECORD":return{...e,harRecords:[t.payload,...e.harRecords].slice(0,5),currentRecording:0};case"CLEAR_HAR_RECORDS":return{...e,harRecords:[],currentRecording:0};case"SET_CURRENT_RECORDING":return{...e,currentRecording:t.payload.index};default:return e}},recording:(e=Kt,{type:t,payload:r})=>{switch(t){case Nt:return{...Kt,tab:r.tab,download:r.download,openIn:r.openIn};case Mt:case Lt:return{...Kt};case $t:return{...e,capturing:!0};case Yt:case Xt:case zt:return{...e,capturing:!1};case Vt:return{...e,nextId:e.nextId+1,page:{id:e.nextId+1,url:r.url,timeStamp:r.timeStamp},history:e.page?[...e.history,e.page]:[]};case Gt:return Zt(e)&&Ft(r.url)&&(e=>null!==e.page)(e)?{...e,requests:{...e.requests,[r.id]:{status:"PENDING",...r}},timeline:[...e.timeline,{page:e.page.id,id:r.id}]}:e;case Jt:return((e,t)=>void 0===e.requests[t.id])(e,r)&&!Zt(e)?e:Ft(r.request.url)?{...e,requests:{...e.requests,[r.id]:{status:Wt,...r}}}:e;default:return e}},generic:(e=Qt,t)=>{switch(t.type){case"SET_USER_TOKEN":return{...e,userToken:t.payload};case"RAISE_ERROR":return{...e,error:t.payload};case"CLEAR_ERROR":return{...e,error:null};default:return e}}}),tr=chrome,rr=(e,...t)=>(...r)=>new Promise(((n,o)=>e(...r,...t,((...t)=>{const r=lr.lastError;r?o({from:e.name,message:r.message}):t.length>1?n(t):n(t[0])})))),nr=(e,...t)=>rr(e)(...t),or=tr.debugger||{},ir={debugger:void 0!==tr.debugger,webRequest:void 0!==tr.webRequest,webNavigation:void 0!==tr.webNavigation,extraInfoSpecs:()=>!0},{webNavigation:sr,tabs:ar,downloads:cr,webRequest:ur,runtime:lr,browserAction:pr,storage:dr,management:hr}=tr,fr=()=>new Promise(((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},(r=>{if(r.length>0)return e(r[0]);t({message:"Invalid tab is selected.",name:"Error"})}))})),gr=(e,t)=>new Promise((r=>{chrome.tabs.update(e,t,r)})),mr=e=>new Promise((t=>{fr().then((r=>{r&&chrome.tabs.update(r.id,e,(()=>{t(r)}))}))})),vr=async e=>new Promise((t=>{ar.create(e,(e=>{t(e)}))})),yr=async(e,t)=>new Promise((r=>{const n=(t,o,i)=>{t===e&&(ar.onUpdated.removeListener(n),r(i))};ar.onUpdated.addListener(n),gr(e,t)})),_r={icon:new class{constructor({icon:e}){this.rgba=[224,62,47,1],this.opacity=1,this.delta=.1,this.icon=e,this.blur=2,this.animationLoop=this.animationLoop.bind(this),this.startAnimation=this.startAnimation.bind(this)}animationLoop(){this.renderIcon(),this.timeout=window.setTimeout(this.animationLoop,30)}renderIcon(){var e=new Image;e.src=this.icon,e.onload=()=>{this.ctx.clearRect(0,0,e.width,e.height),this.iconSize=e.width,this.radius=this.iconSize/5,this.centerX=e.width-this.radius-this.blur,this.centerY=e.height-this.radius-this.blur,this.canvas.width=e.width,this.canvas.height=e.height,this.arc=[this.centerX,this.centerY,this.radius,0,2*Math.PI,!1],this.ctx.drawImage(e,0,0),this.animateRecording(),chrome.browserAction.setIcon({imageData:this.ctx.getImageData(0,0,e.width,e.height)})}}stopAnimation(){this.ctx&&(window.clearTimeout(this.timeout),this.timeout=null,this.isActive=!1,this.renderIcon())}startAnimation(){const e=document.createElement("canvas");this.canvas=e,this.width=e.width,this.height=e.height,this.ctx=e.getContext("2d"),this.isActive=!0,this.animationLoop()}animateRecording(){this.isStarted||(this.startTime=window.performance.now(),this.isStarted=!0),this.opacity>=1&&(this.opacity=1,this.delta=-this.delta),this.opacity<=0&&(this.opacity=0,this.delta=-this.delta),this.ctx.beginPath(),this.ctx.arc(...this.arc),this.ctx.fillStyle="#4a4d67",this.ctx.lineWidth=1,this.ctx.strokeStyle=this.color,this.ctx.fill(),this.ctx.stroke(),this.isActive&&(this.opacity=parseFloat((this.delta+this.opacity).toFixed(2)),this.color=`rgba(${this.rgba.join(",")})`,this.ctx.beginPath(),this.ctx.arc(...this.arc),this.ctx.shadowColor=this.color,this.ctx.shadowBlur=this.blur,this.ctx.fillStyle=this.color,this.rgba=[...this.rgba.slice(0,-1),this.opacity],this.ctx.fillStyle=this.color,this.ctx.lineWidth=1,this.ctx.strokeStyle=this.color,this.ctx.fill(),this.ctx.stroke())}}({icon:"images/app-icon@48.png"}),updateTab:gr,getCurrentTab:fr,updateCurrentTab:mr,openInNewTab:vr,openInExistingTab:async e=>{const t=new URL(e.url),r=`${t.protocol}//${t.host}/*`,[n]=await nr(ar.query,{url:r});return void 0===n?await vr(e):yr(n.id,e)},updateTabAndWait:yr,navigateCurrentTab:e=>new Promise(((t,r)=>{const n=o=>{if(sr.onCommitted.removeListener(n),!o)return r();o.url===e&&fr().then(t)};sr.onCommitted.addListener(n),mr({url:e})})),clearBrowserCache(){const e={since:(new Date).getTime()-6048e5,originTypes:{unprotectedWeb:!0}};return new Promise((t=>{chrome.browsingData.removeCache(e,t)}))}};function br(){return e=>t=>{switch(t.type){case Nt:case Ut:_r.icon.startAnimation();break;case Mt:case Lt:case qt:_r.icon.stopAnimation()}return e(t)}}let wr=jt(wt,br);wr=function e(t,r,n){var o;if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof r&&void 0===n&&(n=r,r=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(e)(t,r)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,s=r,a=[],c=a,u=!1;function l(){c===a&&(c=a.slice())}function p(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return l(),c.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,l();var r=c.indexOf(e);c.splice(r,1),a=null}}}function h(e){if(!St(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,s=i(s,e)}finally{u=!1}for(var t=a=c,r=0;r<t.length;r++)(0,t[r])();return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,h({type:At.REPLACE})}function g(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(p())}return r(),{unsubscribe:t(r)}}})[xt.Z]=function(){return this},e}return h({type:At.INIT}),(o={dispatch:h,subscribe:d,getState:p,replaceReducer:f})[xt.Z]=g,o}(er,jt(wt,br));const xr=e=>(...t)=>new Promise(((r,n)=>{e(...t,(e=>{const t=lr.lastError;if(t)return n(t);r(e)}))})),Er={local:{get:xr(dr.local.get.bind(dr.local)),set:xr(dr.local.set.bind(dr.local))}},Ar=(xr(ar.get),xr(ar.query),xr(ar.update),(e,t)=>void 0===t?(t={})=>({type:e,payload:t}):{type:e,payload:t}),Sr="debugger",Rr="web-navigation",kr="web-request",Tr="null",Or=Ar($t),Ir=Ar(Yt),jr=Ar(Vt),Cr=Ar(Gt),Pr=Ar("recording/request-failed"),Dr=Ar(Jt),Nr=(Ar(zt),e=>async t=>{switch(t(Ar(Xt,e)),e.reason){case"tab-closed":t(ro());break;case"invalid-target":case"user-canceled":t(Qn())}}),Lr=e=>e.map((({name:e,...t})=>({name:e.toLowerCase(),...t}))),qr=e=>e.split(";").map((e=>e.trim())).map((e=>e.split("="))),Ur=e=>{const[t,...r]=e.split(";").map((e=>e.trim()));return{...Object.fromEntries(r.map((e=>e.split("=")))),mimeType:t,value:e}},Mr=e=>t=>t.name===e,Br=e=>{const t=e.find(Mr("content-type"));return Ur(t?t.value:"application/octet-stream")},Hr=e=>e.filter(Mr("cookie")).flatMap((e=>{return t=e.value,qr(t).map((([e,t])=>({name:e,value:t})));var t})),Fr=e=>e.filter(Mr("set-cookie")).map((e=>(e=>{const[[t,r],...n]=qr(e),o={name:t,value:r};return n.reduce(((e,[t,r])=>({...e,[(e=>{const t=[e.charAt(0).toLowerCase()];for(let r=1;r<e.length;++r){const n=e.charAt(r);if(n===n.toUpperCase())break;t.push(n.toLowerCase())}return t.join("")+e.substring(t.length).replace(/[_-](\w)?/i,((e,t="")=>t.toUpperCase()))})(t)]:void 0===typeof r||r})),o)})(e.value)));class Wr{constructor({type:e=Tr,store:t,tab:r,monitor:n}){var o;(o="enabled")in this?Object.defineProperty(this,o,{value:false,enumerable:!0,configurable:!0,writable:!0}):this[o]=false,this.type=e,this.store=t,this.monitor=n,this.tab=r}enableCapture(e){return this.enabled?Promise.resolve():(this.enabled=!0,this.onEnable(e))}disableCapture(e){return this.enabled?(this.enabled=!1,this.onDisable(e)):Promise.resolve()}async onEnable(){}async onDisable(){}dispatch(e,t){"function"==typeof e&&void 0!==t&&(e=e(this.enrich(t))),"function"!=typeof e?this.store.dispatch({...e,payload:this.enrich(e.payload)}):this.store.dispatch(e)}enrich(e){return{...e,tab:this.tab,recorder:this.type}}}const $r=e=>0===e,Yr=e=>{let t=new Set;return r=>{const{requestId:n}=r;if(!t.delete(n))return t.add(n),e(r)}},Vr=()=>{let e=null,t=null;const r=new Promise(((r,n)=>{e=r,t=n}));return r.resolve=e,r.reject=t,r},Gr="TIMED_OUT";function Jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const zr=Symbol("pending"),Xr=e=>Object.entries(e).every((([,e])=>Kr(e)?Xr(e):e!==zr)),Kr=e=>null!==e&&!Array.isArray(e)&&"object"==typeof e,Zr=(e,t)=>{let r={};for(const[n,o]of Object.entries(e))r[n]=o,void 0!==t[n]&&(Kr(o)&&Kr(t[n])?r[n]=Zr(o,t[n]):r[n]=t[n]);return r},Qr={protocol:zr,request:{method:zr,url:zr,headers:zr,cookies:zr,body:zr,timeStamp:zr},response:{status:zr,statusText:zr,headers:zr,cookies:zr,body:zr,timeStamp:zr}};class en{constructor(){Jr(this,"pendingRequests",{}),Jr(this,"getRequestState",(e=>(this.pendingRequests[e]=this.pendingRequests[e]||{done:!1,requestId:e,request:Qr,progress:Vr()},this.pendingRequests[e]))),Jr(this,"clearRequest",(e=>{this.pendingRequests[e]=void 0})),Jr(this,"handleError",((e,t)=>{const r=this.getRequestState(e);if(t===Gr)return{success:!1,error:{code:Gr,request:{id:e,...Zr(r.request,{})}}};throw t})),Jr(this,"getRequestURL",(e=>this.getRequestState(e).request.request.url)),Jr(this,"resolveRedirect",((e,t,r)=>{this.pendingRequests[e]&&this.getRequestURL(e)===t&&this.resolve(e,r)})),Jr(this,"resolve",((e,t)=>{const r=this.getRequestState(e),n=Zr(r.request,t);this.pendingRequests[e]={done:Xr(n),requestId:e,request:n,progress:Vr()},r.progress.resolve(this.pendingRequests[e])})),Jr(this,"waitOnProgress",(e=>{return t=e.progress,6e4,new Promise(((e,r)=>{const n=setTimeout((()=>r(Gr)),6e4);t.then((t=>{clearTimeout(n),e(t)}))}));var t})),Jr(this,"waitOnValue",(async(e,t)=>{try{let r=this.getRequestState(e);for(;t(r.request)===zr;)r=await this.waitOnProgress(r);return{success:!0,value:t(r.request)}}catch(t){return this.handleError(e,t)}})),Jr(this,"waitUntilDone",(async e=>{try{let t=this.getRequestState(e);for(;!t.done;)t=await this.waitOnProgress(t);return{success:!0,value:{id:e,...t.request}}}catch(t){return this.handleError(e,t)}finally{this.clearRequest(e)}}))}}const tn=e=>[...new URLSearchParams(e).entries()].map((([e,t])=>({name:e,value:t}))),rn=(e,t)=>{let r={index:0,lines:t.split(/\r\n/gm),boundary:`--${e}`,end:`--${e}--`,result:null},n=[];for(;!pn(r);)r=sn(r),n.push(r.result);return n.map(on)},nn=e=>void 0!==e?e.replace(/^"|"$/gi,""):e,on=({headers:e,body:t})=>{const r=(e=>{const t=e.find(Mr("content-disposition"));return t?Ur(t.value):null})(e),n=e.find((e=>"content-type"===e.name));return r?{name:nn(r.name),value:t,fileName:nn(r.filename),contentType:n?n.value:void 0}:{}},sn=e=>{const t=dn(e);if(t!==e.boundary)throw new Error(`Expected to find boundary '${e.boundary}' but found '${t}' instead.`);const r=an(hn(e)),n=cn(hn(r));return fn(n,{headers:r.result,body:n.result})},an=e=>{let t=[];for(;!un(e);){const[r,n]=dn(e).split(":").map((e=>e.trim()));t.push({name:r,value:n}),e=hn(e)}return fn(e,Lr(t))},cn=e=>{let t=[];for(;!ln(e);)t.push(dn(e)),e=hn(e);return fn(e,t.join("\r\n"))},un=e=>""===dn(e),ln=e=>dn(e)===e.boundary||pn(e),pn=e=>dn(e)===e.end,dn=e=>e.lines[e.index],hn=e=>({...e,index:e.index+1}),fn=(e,t)=>({...e,result:t}),gn=(e,t)=>{switch(e.mimeType){case"application/x-www-form-urlencoded":{const r="string"==typeof t?tn(t):t;return{mimeType:e.mimeType,params:r.map((e=>({name:encodeURIComponent(e.name),value:encodeURIComponent(e.value)}))),text:"string"==typeof t?t:void 0}}case"multipart/form-data":return{mimeType:e.mimeType,params:"string"==typeof t?rn(e.boundary,t):t,text:"string"==typeof t?t:void 0};default:return{mimeType:e.mimeType,text:t}}};function mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const vn=(e,t)=>{const r=Br(e);if(!t)return null;if("formData"in t)return gn(r,Object.entries(t.formData).flatMap((([e,t])=>t.map((t=>({name:e,value:t}))))));if("raw"in t){const e=new TextDecoder,n=t.raw.filter((e=>e.bytes)).map((t=>e.decode(t.bytes))).join("");return gn(r,n)}return"error"in t&&"text/plain"===r.mimeType?gn(r,""):gn(r,t)};class yn extends Wr{constructor(e){super({...e,type:kr}),mn(this,"correlator",new en),mn(this,"onBeforeRequest",Yr((async({requestId:e,method:t,url:r,requestBody:n,timeStamp:o})=>{this.dispatch(Cr({id:e,method:t,url:r}));const i=await this.correlator.waitOnValue(e,(e=>e.request.headers));i.success&&this.correlator.resolve(e,{request:{method:t,url:r,timeStamp:o,body:vn(i.value,n)}})}))),mn(this,"onSendHeaders",Yr((({requestId:e,requestHeaders:t})=>{const r=Lr(t),n=Hr(r);this.correlator.resolve(e,{request:{headers:r,cookies:n}})}))),mn(this,"onCompleted",Yr((async({requestId:e,statusCode:t,statusLine:r,responseHeaders:n,timeStamp:o})=>{const i=(e=>{const[t,r,...n]=e.split(" ");return{protocol:t,status:r,text:n.join(" ")}})(r),s=Lr(n),a=Fr(s);this.correlator.resolve(e,{protocol:i.protocol,response:{status:t,statusText:i.text,timeStamp:o,headers:s,cookies:a,body:null}});const c=await this.correlator.waitUntilDone(e);c.success?this.dispatch(Dr(c.value)):this.dispatch(Pr(c.error))})))}async onEnable(){this.addListeners(),this.dispatch(Or())}async onDisable(){this.removeListeners(),this.dispatch(Ir())}addListeners(){const e={urls:["http://*/*","https://*/*"],tabId:this.tab.tabId};ur.onBeforeRequest.addListener(this.onBeforeRequest,e,["requestBody"]),ur.onSendHeaders.addListener(this.onSendHeaders,e,["requestHeaders","extraHeaders"].filter(ir.extraInfoSpecs)),ur.onCompleted.addListener(this.onCompleted,e,["responseHeaders","extraHeaders"].filter(ir.extraInfoSpecs))}removeListeners(){ur.onBeforeRequest.removeListener(this.onBeforeRequest),ur.onSendHeaders.removeListener(this.onSendHeaders),ur.onCompleted.removeListener(this.onCompleted)}}const _n=({message:e})=>{try{return JSON.parse(e)}catch{return{message:e}}},bn=e=>((e,t)=>(r,...n)=>t(r,...n).catch((t=>Promise.reject({from:e,debugee:r,args:n,..._n(t)}))))(e,rr(((t,...r)=>{or.sendCommand(t,e,...r)}))),wn=e=>(t,r)=>kn(t,((t,n)=>{e==t&&r(n)})),xn=rr(or.attach),En=rr(or.detach),An=rr(or.getTargets),Sn=e=>(t,r)=>{const n=(e,...n)=>{e.tabId===t.tabId&&r(...n)};return or[e].addListener(n),()=>or[e].removeListener(n)},Rn=Sn("onDetach"),kn=Sn("onEvent"),Tn={reload:bn("Page.reload")},On={enable:bn("Network.enable"),disable:bn("Network.disable"),getResponseBody:bn("Network.getResponseBody"),getRequestPostData:((e,t,r)=>async(e,...n)=>((e,t)=>{const[r,n]=e.split("."),[o,i]=t.split(".");return o>r||o==r&&i>=n})("1.3",(await In.getVersion(e)).protocolVersion)?await t(e,...n):r)(0,bn("Network.getRequestPostData"),{postData:void 0}),requestWillBeSent:wn("Network.requestWillBeSent"),responseReceived:wn("Network.responseReceived"),loadingFinished:wn("Network.loadingFinished")},In={getVersion:bn("Browser.getVersion")};function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Cn=e=>Lr(Object.entries(e).flatMap((([e,t])=>{return(r=t,r.split(/\r?\n/gm)).map((t=>({name:e,value:t})));var r}))),Pn=e=>1e3*e,Dn=e=>{switch(e){case"h2":return"http/2";default:return e}},Nn=new Set(["application/json","application/xml","application/x-www-form-urlencoded","multipart/form-data","text/html","text/xml"]);class Ln extends Wr{constructor(e){super({...e,type:Sr}),jn(this,"listeners",[]),jn(this,"correlator",new en),jn(this,"onRequestWillBeSent",(async({requestId:e,wallTime:t,redirectResponse:r,request:n})=>{if(r)return void this.onResponseReceived({requestId:e,response:r});this.dispatch(Cr({id:e,method:n.method,url:n.url}));const o=Cn(n.headers),i=((e,t)=>"string"==typeof t.postData||t.hasPostData||(e=>{const t=e.find(Mr("content-length"));return t?parseInt(t.value):0})(e)>0)(o,n)?await this.getRequestBody(e,n):null;this.correlator.resolve(e,{request:{method:n.method,url:n.url,headers:o,cookies:[],body:i&&gn(Br(o),i),timeStamp:Pn(t)}})})),jn(this,"onResponseReceived",Yr((async({requestId:e,response:t})=>{if(t.requestHeaders){const r=Cn(t.requestHeaders);this.correlator.resolveRedirect(e,t.url,{request:{headers:r,cookies:Hr(r)}})}const r=await this.correlator.waitOnValue(e,(e=>e.request.timeStamp));if(!r.success)return;const n=Cn(t.headers),o=t.time&&t.time.receiveHeadersEnd?r.value+Pn(t.timing.receiveHeadersEnd):Date.now();this.correlator.resolve(e,{protocol:Dn(t.protocol),response:{status:t.status,statusText:t.statusText,headers:n,cookies:Fr(n),timeStamp:o}})}))),jn(this,"onLoadingFinished",Yr((async({requestId:e})=>{const t=await this.correlator.waitOnValue(e,(e=>e.response.headers));if(!t.success)return;const r=Br(t.value),n=Nn.has(r.mimeType)?await this.getResponseBody(e):null;this.correlator.resolve(e,{response:{body:n?{mimeType:r.mimeType||r.value,text:n.body,encoding:n.base64Encoded?"base64":void 0}:null}});const o=await this.correlator.waitUntilDone(e);o.success?this.dispatch(Dr(o.value)):this.dispatch(Pr(o.error))}))),jn(this,"onDetached",(async e=>{switch(e){case"target_closed":if(!(await nr(ar.query,{windowId:this.tab.windowId})).some((e=>e.id===this.tab.tabId)))return;this.dispatch(Nr,{reason:"invalid-target"});break;case"canceled_by_user":this.dispatch(Nr,{reason:"user-canceled"})}})),jn(this,"onSchemeEnter",(async()=>{await this.attach(),await Tn.reload(this.debugee,{})})),this.url=e.url,this.debugee={tabId:e.tab.tabId}}async onEnable(){this.monitor.addListener("enter",this.onSchemeEnter),this.dispatch(Or()),this.monitor.isVisitingHttp()&&await this.attach()}async onDisable(){this.monitor.removeListener("enter",this.onSchemeEnter),await this.detach(),this.dispatch(Ir())}async attach(){await xn(this.debugee,"1.2"),this.addListeners(this.debugee),await On.enable(this.debugee,{})}async detach(){this.removeListeners(),await(async e=>(e=>(e=>An().then((t=>t.find((t=>t.tabId===e.tabId)))))(e).then((e=>void 0!==e&&e.attached)))(this.debugee).then((e=>!e)))()||await En(this.debugee).catch((()=>{}))}addListeners(e){this.listeners=[On.requestWillBeSent(e,this.onRequestWillBeSent),On.responseReceived(e,this.onResponseReceived),On.loadingFinished(e,this.onLoadingFinished),Rn(e,this.onDetached)]}removeListeners(){this.listeners.forEach((e=>e())),this.listeners=[]}async getRequestBody(e,t){const{postData:r,hasPostData:n}=t;if(r)return r;if(!n)return null;try{return(await On.getRequestPostData(this.debugee,{requestId:e})).postData}catch(e){return null}}async getResponseBody(e){try{return await On.getResponseBody(this.debugee,{requestId:e})}catch(e){return null}}}function qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Un extends Wr{constructor(e){super({...e,type:Rr}),qn(this,"url","about:blank"),qn(this,"isCurrentTab",(e=>e===this.tab.tabId)),qn(this,"isCurrentPage",(e=>e===this.url)),qn(this,"onBeforeNavigate",(({tabId:e,frameId:t,url:r,timeStamp:n})=>{this.isCurrentTab(e)&&$r(t)&&this.handleNavigation({url:r,timeStamp:n})})),qn(this,"onCommited",(({tabId:e,frameId:t,url:r})=>{this.isCurrentTab(e)&&$r(t)&&(this.url=r)}))}async onEnable({url:e}){this.addListeners(),this.dispatch(Or()),this.handleNavigation({url:e,timeStamp:Date.now()})}async onDisable(){this.removeListeners(),this.dispatch(Ir())}addListeners(){sr.onBeforeNavigate.addListener(this.onBeforeNavigate),sr.onCommitted.addListener(this.onCommited)}removeListeners(){sr.onBeforeNavigate.removeListener(this.onBeforeNavigate),sr.onCommitted.removeListener(this.onCommited)}handleNavigation({url:e,timeStamp:t}){this.isCurrentPage(e)||(this.url=e,Ft(e)&&this.dispatch(jr({url:e,timeStamp:t})))}}class Mn extends Error{constructor(e,t){super(`Platform ${t} does not support recording using ${e}.`)}}const Bn=(e,t)=>{if(!(e=>{switch(e){case Sr:return ir.debugger;case kr:return ir.webRequest;case Rr:return ir.webNavigation;case Tr:return!0;default:return!1}})(e))throw new Mn(e,"chrome");switch(e){case Sr:return new Ln(t);case kr:return new yn(t);case Rr:return new Un(t);case Tr:return new Wr(t)}},Hn=e=>`page_${e}`,Fn=e=>new Date(e).toISOString(),Wn=e=>({id:Hn(e.id),url:e.url,title:e.url,startedDateTime:Fn(e.timeStamp)});function $n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Yn{constructor(e){$n(this,"isVisitingHttp",(()=>Ft(this.current.href))),$n(this,"isCurrentTab",(e=>this.tab.tabId===e)),$n(this,"isCurrentUrl",(e=>this.current.href===e)),$n(this,"shouldProcess",(({tabId:e,frameId:t,url:r})=>this.isCurrentTab(e)&&$r(t)&&!this.isCurrentUrl(r))),$n(this,"notify",((e,t)=>e in this.listeners&&this.listeners[e].forEach((e=>e(t))))),$n(this,"onCommitted",(e=>{if(!this.shouldProcess(e))return;const t={href:e.url,http:Ft(e.url)},r=((e,t)=>e.http&&!t.http?"exit":!e.http&&t.http?"enter":null)(this.current,t);this.current=t,null!==e&&this.notify(r,e)})),this.tab=e,this.reset()}addListener(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e]=[...this.listeners[e],t]}removeListener(e,t){e in this.listeners&&(this.listeners[e]=this.listeners[e].filter((e=>e!==t)))}start(e){this.current={href:e,http:Ft(e)},sr.onCommitted.addListener(this.onCommitted)}stop(){sr.onCommitted.removeListener(this.onCommitted),this.reset()}reset(){this.current={href:"about:blank",http:!1},this.listeners={enter:[],exit:[]}}}class Vn{constructor(e,t){var r,n;n=e=>{e===this.tab.tabId&&this.store.dispatch(Nr({tab:this.tab,reason:"tab-closed"}))},(r="onRemoved")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this.store=e,this.tab=t}start(){ar.onRemoved.addListener(this.onRemoved)}stop(){ar.onRemoved.removeListener(this.onRemoved)}}class Gn extends Error{constructor(e){super(e)}}const Jn=new class{constructor(){var e,t;t={},(e="recordings")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}init(e){Jn.store=e}get({tabId:e}){return this.recordings[e]}start(e,t,r){if(void 0!==this.get(e))throw new Gn(`Cannot start recording tab with id ${e.tabId} because it is already being recorded.`);const n=new Vn(this.store,e),o=new Yn(e),i=((e,t)=>[Bn(Rr,t),Bn(e,t)])(t,{store:this.store,tab:e,url:r,monitor:o});this.recordings[e.tabId]={tab:e,tabMonitor:n,schemeMonitor:o,recorders:i},n.start()}stop(e){const t=this.get(e);if(void 0===t)throw new Gn(`Cannot stop recording tab with id ${e.tabId} because it is not being recorded.`);return this.recordings[e.tabId]=void 0,t.tabMonitor.stop(),t.schemeMonitor.stop(),Promise.all(t.recorders.map((e=>e.disableCapture())))}enableCapture(e,t){const{recorders:r=[],schemeMonitor:n=null}=this.get(e);if(0===r.length)throw new Gn(`Cannot enable capture for tab with id ${e.tabId} because it is not being recorded.`);return n.start(t),Promise.all(r.map((e=>e.enableCapture({url:t}))))}disableCapture(e){const{recorders:t=[]}=this.get(e);if(0===t.length)throw new Gn(`Cannot disable capture for tab with id ${e.tabId} because it is not being recorded.`);return Promise.all(t.map((e=>e.disableCapture())))}getRecordings(){return Object.values(this.recordings).filter((e=>void 0!==e))}},zn={reuseExistingTab:!1,cloudAppUrl:"https://app.k6.io/api/recorder?platform=chrome"},Xn="recorded-tab";function Kn({tab:e,downloadFile:t,correlateRequests:r,clearCache:n,openIn:o="new-tab"}){return async i=>{n&&await _r.clearBrowserCache();const s=r?Sr:kr;await Jn.start(e,s,e.url),i(io({type:s,tab:e,url:e.url,download:t,openIn:o})),await Jn.enableCapture(e,e.url)}}const Zn=async(e,t="new-tab")=>{const{cloudAppUrl:r}=await Er.local.get(zn);let n=e&&e.tabId;"new-tab"===t||t===Xn&&null===n?n=(await _r.openInNewTab({url:r,active:!0})).id:"existing-tab"===t?n=(await _r.openInExistingTab({url:r,active:!0})).id:await _r.updateTabAndWait(n,{url:r,active:!0}),await nr(ar.executeScript,n,{runAt:"document_end",file:"inject-data.js"})};function Qn(){return async(e,t)=>{const{recording:r}=t();if(await Jn.stop(r.tab),e({type:Lt}),0===r.timeline.length)return null;const n=(({page:e,history:t,timeline:r,requests:n})=>({log:{version:"1.2",creator:{name:"k6 Browser Recorder",version:"0.6.2"},pages:[...t,e].map(Wn),entries:r.filter((e=>n[e.id].status===Wt)).map((e=>((e,t)=>{return{pageref:Hn(e.page),startedDateTime:Fn(t.request.timeStamp),request:{httpVersion:t.protocol,method:t.request.method,url:t.request.url,headers:t.request.headers,cookies:t.request.cookies,queryString:(r=t.request.url,tn(new URL(r).search)),postData:t.request.body||void 0},response:{httpVersion:t.protocol,status:t.response.status,statusText:t.response.statusText,headers:t.response.headers,cookies:t.response.cookies,content:t.response.body||void 0}};var r})(e,n[e.id])))}}))(r);return e({type:"ADD_HAR_RECORD",payload:n}),await Zn(r.tab,r.openIn),r.download&&await e(no(0)),n}}function eo(){return async(e,t)=>{const{recording:r}=t();await Jn.disableCapture(r.tab),e(Ar(qt,{}))}}function to(){return async(e,t)=>{const{recording:r}=t(),n=await nr(ar.get,r.tab.tabId);await Jn.enableCapture(r.tab,n.url),e(Ar(Ut,{}))}}function ro(){return async(e,t)=>{const{recording:r}=t();await Jn.stop(r.tab),e({type:Mt})}}function no(e=0){return async(t,r)=>{const n=r().controls.harRecords;if(e>=n.length)return!1;const o=new Date,i=`new-recording_${o.getHours()}${o.getMinutes()}${o.getSeconds()}.har`,s=JSON.stringify(n[e],null,2);var a=new File([s],i,{type:"octet/stream"});return cr.download({url:URL.createObjectURL(a),filename:i}),!0}}const oo=Ar("SET_CURRENT_RECORDING"),io=(Ar("CLEAR_HAR_RECORDS"),Ar(Nt)),so={[Nt]:Kn,[Lt]:Qn,[qt]:eo,[Ut]:to,[Mt]:ro,[Bt]:no,[Dt]:function(e){return async t=>{await _r.navigateCurrentTab("about:blank");const r=await _r.getCurrentTab();var n;return await t(Kn({tab:(n=r,n?{tabId:n.id,windowId:n.windowId,url:n.url}:null),correlateRequests:!0,clearCache:!0,downloadFile:!1,openIn:Xn})),_r.updateCurrentTab({url:e.payload.url})}},[Pt]:function(e){return()=>fetch(e.payload.url).then((t=>t.ok?{isOk:t.ok,status:t.status}:Promise.reject({isOk:t.ok,status:t.status,message:`The URL "${e.payload.url}" returned HTTP status ${t.status}`}))).catch((t=>t.status?Promise.reject(t):Promise.reject({isOk:!1,status:-1,message:`The URL "${e.payload.url}" could not be reached`})))}},ao=(e={})=>{const{name:t="Unknown Error",message:r="An unknown error occurred. Our developers have been notified and are working to solve it."}=e;return`${t}: ${r}`},co=["CONNECT_TO_STORE","STATE_PROVIDER","injected-data"];class uo{constructor(e){var t,r;r=e=>{if(!co.includes(e.name))return;let t=!1;const r=e=>{t=!0,e.onMessage.removeListener(n),e.onDisconnect.removeListener(r),o()},n=e=>{this.dispatchAction(e)},o=this.store.subscribe((()=>{t||e.postMessage(this.store.getState())}));e.onMessage.addListener(n),e.onDisconnect.addListener(r),e.postMessage(this.store.getState())},(t="onPortConnect")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.store=e}getState(){return this.store.getState()}dispatchAction(e){return this.store.getState().generic.error&&this.store.dispatch({type:"CLEAR_ERROR"}),t=so,r=e.type,Object.prototype.hasOwnProperty.call(t,r)?this.store.dispatch(so[e.type](e)).catch((e=>{throw this.store.dispatch({type:"RAISE_ERROR",payload:{details:ao(e)}}),e})):new Promise((t=>{this.store.dispatch(e),t()}));var t,r}init(){lr.onConnect.addListener(this.onPortConnect)}}function lo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class po{static start(e){return new po(e).init()}constructor(e){lo(this,"onConnect",(e=>{co.includes(e.name)||(e.onMessage.addListener(this.onMessage),e.onDisconnect.addListener(this.onDisconnect))})),lo(this,"onDisconnect",(e=>{e.onMessage.removeListener(this.onMessage),e.onDisconnect.removeListener(this.onDisconnect)})),lo(this,"tryRespond",((e,t)=>{try{e.postMessage(t)}catch(e){}})),lo(this,"succeeded",((e,t)=>r=>{this.tryRespond(e,{succeeded:!0,requestId:t.requestId,response:r})})),lo(this,"failed",((e,t)=>(r={})=>{this.tryRespond(e,{succeeded:!1,requestId:t.requestId,error:{message:r.stack||r.toString()||r.message||"unknown error"}})})),lo(this,"onMessage",((e,t)=>{switch(e.type){case"one-way":this.trigger(e.payload);break;case"request":this.handle(e.payload).then(this.succeeded(t,e)).catch(this.failed(t,e))}})),lo(this,"asyncDispatch",(e=>"function"!=typeof e?(this.store.dispatch(e),Promise.resolve()):new Promise(((t,r)=>{this.store.dispatch(((...n)=>{e(...n).then(t).catch(r)}))})))),this.store=e}init(){return lr.onConnect.addListener(this.onConnect),this}trigger(e){switch(e.type){case"download-recording":this.store.dispatch(no(e.index));break;case"open-in-cloud":this.store.dispatch((t=e.index,r=e.openIn,async(e,n)=>{const{recording:o,controls:i}=n();t>=i.harRecords.length||(e(oo({index:t})),await Zn(o.tab,r))}))}var t,r}async handle(e){switch(e.type){case"get-recording-state":{const{controls:e,recording:t}=this.store.getState();return null===t.tab?{state:"STOPPED"}:{state:e.isPaused?"PAUSED":"STARTED",recordedTab:t.tab}}case"start-recording":return await this.asyncDispatch(Kn(e.opts));case"pause-recording":return await this.asyncDispatch(eo());case"resume-recording":return await this.asyncDispatch(to());case"stop-recording":return await this.asyncDispatch(Qn());case"reset-recording":return await this.asyncDispatch(ro());case"list-recordings":return this.store.getState().controls.harRecords}}}const ho=[Dt,Lt,Pt,Ct];!function(){({NODE_ENV:"production",PLATFORM:"chrome",APP_NAME:"k6 Browser Recorder",APP_VERSION:"0.6.2",VENDOR:"chrome",APP_URL:"https://app.k6.io",APP_REDIRECT_URL:"https://app.k6.io/api/recorder?platform=chrome",SENTRY_DNS:"https://c291e8c882d04027bbc29af35860d87d@sentry.io/2982686",SENTRY_RELEASE:"k6-browser-recorder@0.6.2"}).SENTRY_DSN&&function(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=yt),void 0===e.release){var t=(0,a.Rf)();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!1),function(e,t){!0===t.debug&&h.enable();var r=X(),n=new e(t);r.bindClient(n)}(pt,e),e.autoSessionTracking&&function(){var e=(0,a.Rf)(),t=X(),r="complete"===document.readyState,n=!1,o=function(){n&&r&&t.endSession()},i=function(){r=!0,o(),e.removeEventListener("load",i)};t.startSession(),r||e.addEventListener("load",i);try{var s=new PerformanceObserver((function(e,t){e.getEntries().forEach((function(e){"first-contentful-paint"===e.name&&e.startTime<c&&(t.disconnect(),n=!0,o())}))})),c="hidden"===document.visibilityState?0:1/0;document.addEventListener("visibilitychange",(function(e){c=Math.min(c,e.timeStamp)}),{once:!0}),s.observe({type:"paint",buffered:!0})}catch(e){n=!0,o()}}()}({dsn:{NODE_ENV:"production",PLATFORM:"chrome",APP_NAME:"k6 Browser Recorder",APP_VERSION:"0.6.2",VENDOR:"chrome",APP_URL:"https://app.k6.io",APP_REDIRECT_URL:"https://app.k6.io/api/recorder?platform=chrome",SENTRY_DNS:"https://c291e8c882d04027bbc29af35860d87d@sentry.io/2982686",SENTRY_RELEASE:"k6-browser-recorder@0.6.2"}.SENTRY_DSN,release:"k6-browser-recorder@0.6.2"}),hr.getSelf((e=>{"development"!==e.installType&&dr.local.set({cloudAppUrl:"https://app.k6.io/api/recorder?platform=chrome"})}));const e=new uo(wr);e.init(),window.backgroundServer=po.start(wr),window.connectedStore=e,Jn.init(wr),chrome.tabs.onRemoved.addListener((e=>t=>{const{controls:r}=e.getState();r.isRecording&&t===r.recordingTabId&&e.dispatchAction({type:Mt})})(e)),chrome.runtime.onMessageExternal.addListener((e=>function(t,r,n){if(t&&t.type){if("GET_RECORDED_HAR"===t.type){const{harRecords:t,currentRecording:r=0}=e.getState().controls;return n({payload:t[r]})}if("RESET_RECORDING"===t.type)return e.dispatchAction({type:Mt}).then((()=>n({payload:{wasReset:!0}}))).catch((e=>n({error:{code:0,message:e.message}})));if("DOWNLOAD_RECORDING"===t.type)return e.dispatchAction({type:Bt}).then((e=>n({payload:{wasDownloaded:e}}))).catch((e=>n({error:{code:0,message:e.message}})));if(t.type===Ct)return n({payload:{isSupported:!0}});if(ho.includes(t.type))return e.dispatchAction(t).then((e=>n({payload:e}))).catch((e=>n({error:e})))}n({error:{code:12,message:t&&t.type?`Unsupported action: ${t.type} was dispatched.`:"An unsupported action was dispatched."}})})(e)),chrome.commands&&chrome.commands.onCommand.addListener((e=>()=>{const{controls:t}=e.getState();t.isRecording?e.dispatchAction({type:Lt}):e.dispatchAction({type:Nt})})(e))}()})()})();
//# sourceMappingURL=background.js.map